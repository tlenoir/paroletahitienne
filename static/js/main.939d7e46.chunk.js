(this.webpackJsonpapparole=this.webpackJsonpapparole||[]).push([[0],{100:function(e,a,t){},101:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(27),c=t.n(l),o=(t(85),t(86),t(15)),i=t(33),m=t(11),s=t(7),u=t.n(s),d=(t(49),t(67),t(40),t(102),t(28));u.a.initializeApp({apiKey:"AIzaSyC7NOgNI4R8tlbLU6KW3hmoDSh_q2nZz40",authDomain:"parole-cce00.firebaseapp.com",databaseURL:"https://parole-cce00.firebaseio.com",projectId:"parole-cce00",storageBucket:"parole-cce00.appspot.com",messagingSenderId:"129631543892",appId:"1:129631543892:web:04f736403b7ce0f5ce83c1",measurementId:"G-4592WN0SEC"});var E=r.a.createContext({user:{uid:"",displayName:"",email:"",emailVerified:Boolean,metadata:{creationTime:"",lastSignInTime:""},photoURL:"",phoneNumber:""}});function p(e){var a=e.children,t=Object(d.a)(u.a.auth()),n=Object(m.a)(t,1)[0];return r.a.createElement(E.Provider,{value:n},a)}var f=t(115),b=t(117),v=t(62),h=t(38),g=t(44),y=t(104),j=t(74),O=t(112),C=t(114),k=t(105),w=t(76),L=t(106),x=t(113),N=t(20),S=t(21);function I(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0];return r.a.createElement("span",null,!a&&r.a.createElement(P,null),a&&r.a.createElement(A,null))}function P(e){e.history;var a=Object(n.useState)(""),t=Object(m.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)({email:"",passwd:"",lastname:"",firstname:"",username:""}),i=Object(m.a)(o,2),d=i[0],E=i[1],p=function(e){E(Object(g.a)({},d,Object(h.a)({},e.target.name,e.target.value)))},f=Object(n.useState)(!1),b=Object(m.a)(f,2),v=b[0],x=b[1],N=Object(n.useState)(!1),S=Object(m.a)(N,2),I=S[0],P=S[1],A=function(){return x(!1)},T=function(){return P(!1)};return r.a.createElement("span",null,r.a.createElement(y.a,null,r.a.createElement(j.a,{className:"ml-1",onClick:function(){return x(!0)},variant:"link"},"Se connecter")),r.a.createElement(O.a,{show:v,onHide:A},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Connectez-vous")),r.a.createElement(C.a,{onSubmit:function(e){u.a.auth().signInWithEmailAndPassword(d.email,d.passwd).then((function(){x(!1),c("")})).catch((function(e){e.code===D&&c(e.message)})),e.preventDefault()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Identifiant"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{value:d.email,name:"email",onChange:p,type:"email"}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextPassword"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Mot de passe"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"password",value:d.passwd,name:"passwd",onChange:p})))),r.a.createElement(O.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:A},"Fermer"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"S'identifier"),l&&r.a.createElement(L.a,{variant:"danger"},l))),r.a.createElement(y.a,null,r.a.createElement(j.a,{size:"sm",onClick:function(){x(!1),P(!0)},variant:"link"},"Cr\xe9er un compte"))),r.a.createElement(O.a,{show:I,onHide:T},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Cr\xe9er un nouvel utilisateur")),r.a.createElement(C.a,{onSubmit:function(e){u.a.auth().createUserWithEmailAndPassword(d.email,d.passwd).then((function(e){return Object(s.firestore)().collection("users").doc(e.user.uid).set({email:d.email,firstname:d.firstname,lastname:d.lastname,dateCreatedAccount:u.a.firestore.Timestamp.fromDate(new Date),username:d.username})})).then((function(){return u.a.auth().currentUser.sendEmailVerification({url:"http://tlenoir.github.io/paroletahitienne/"})})).then((function(){return u.a.auth().currentUser.updateProfile({displayName:d.username})})).catch((function(e){e.code===B&&c(e.message)})),e.preventDefault()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Email"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"email",required:!0,value:d.email,name:"email",onChange:p}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextPassword"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Mot de passe"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{required:!0,value:d.passwd,name:"passwd",onChange:p,type:"password"}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Nom"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{className:"text-capitalize",type:"text",required:!0,value:d.lastname,name:"lastname",onChange:p}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Pr\xe9nom"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{className:"text-capitalize",type:"text",required:!0,value:d.firstname,name:"firstname",onChange:p}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Nom utilsateur"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"text",required:!0,value:d.username,name:"username",onChange:p})))),r.a.createElement(O.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:T},"Annuler"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Enregistrer"),l&&r.a.createElement(L.a,{variant:"danger"},l)))))}function A(){return r.a.createElement(y.a,null,r.a.createElement(x.a,null,r.a.createElement(x.a.Toggle,{variant:"link",id:"dropdown-custom-1"},r.a.createElement(N.a,{icon:S.g,size:"lg"})),r.a.createElement(x.a.Menu,{className:"dropdown-menu-md-right"},r.a.createElement(x.a.Item,{as:o.Link,to:"/paroletahitienne/profile",eventKey:"1"},"Profile"),r.a.createElement(x.a.Divider,null),r.a.createElement(x.a.Item,{onClick:function(){u.a.auth().signOut()},eventKey:"4"},"Se D\xe9connecter"))))}var B="auth/email-already-in-use",D="auth/user-not-found";function T(){return r.a.createElement(f.a,{className:"mb-1",collapseOnSelect:!0,expand:"lg",bg:"light"},r.a.createElement(f.a.Brand,{href:"/"},"Parole Tahitienne"),r.a.createElement(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(f.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(b.a,{className:"mr-auto"},r.a.createElement(v.LinkContainer,{to:"/paroletahitienne/"},r.a.createElement(b.a.Link,null,"Home")),r.a.createElement(v.LinkContainer,{to:"/paroletahitienne/liste"},r.a.createElement(b.a.Link,null,"Liste")))),r.a.createElement(f.a.Collapse,{className:"justify-content-end"},r.a.createElement(I,null)))}function z(){return r.a.createElement("div",null,"HomePage")}t(100);var q=t(32),G=t(107),K=t(119);function H(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0],t=Object(q.a)(u.a.firestore().collection("paroles"),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),l&&r.a.createElement("div",null,r.a.createElement(F,null),r.a.createElement(K.a,{variant:"flush"},l.docs.map((function(e){return r.a.createElement(K.a.Item,{variant:"light",as:o.Link,to:"/paroletahitienne/liste=".concat(e.id),key:e.id},e.data().titre,a&&!a.isAnonymous&&r.a.createElement(M,{data:{id:e.id,titre:e.data().titre,artiste:e.data().artiste,createBy:e.data().createBy},uid:a.uid}))})))))}function F(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0],t=Object(n.useState)(!1),l=Object(m.a)(t,2),c=l[0],o=l[1],i=Object(n.useState)({titre:"",artiste:"",parole:""}),E=Object(m.a)(i,2),p=E[0],f=E[1],b=Object(n.useState)(!1),v=Object(m.a)(b,2),y=v[0],k=v[1],L=function(e){f(Object(g.a)({},p,Object(h.a)({},e.target.name,e.target.value)))},x=function(){o(!c)};return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"link",onClick:x},r.a.createElement(N.a,{className:"mr-1",icon:S.c,size:"lg"}),"Ajouter une chanson"),r.a.createElement(O.a,{show:c,onHide:x},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Ajouter une nouvelle chanson")),r.a.createElement(C.a,{noValidate:!0,validated:y,onSubmit:function(e){e.currentTarget.checkValidity()?(Object(s.firestore)().collection("paroles").add(Object(g.a)({},p,{createAt:u.a.firestore.Timestamp.fromDate(new Date),uid:a?a.uid:"anonymous",createBy:a?a.displayName:"anonymous"})).then((function(e){a&&Object(s.firestore)().collection("users/".concat(a.uid,"/chansons")).add({id:e.id,createAt:u.a.firestore.Timestamp.fromDate(new Date),titre:p.titre,artiste:p.artiste}).then((function(){f({titre:"",artiste:"",parole:""}),k(!1)}))})),o(!1)):k(!0),e.preventDefault(),e.stopPropagation()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Group,{as:w.a,md:"4",controlId:"validationCustom01"},r.a.createElement(C.a.Label,null,"Titre"),r.a.createElement(C.a.Control,{required:!0,name:"titre",value:p.titre,onChange:L,type:"text",placeholder:"titre parole tahitienne"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!")),r.a.createElement(C.a.Group,{as:w.a,md:"8",controlId:"validationCustom02"},r.a.createElement(C.a.Label,null,"Artiste"),r.a.createElement(C.a.Control,{required:!0,name:"artiste",value:p.artiste,onChange:L,type:"text",placeholder:"artiste parole tahitienne"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!"))),r.a.createElement(C.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(C.a.Label,null,"Parole"),r.a.createElement(C.a.Control,{required:!0,name:"parole",value:p.parole,onChange:L,as:"textarea",rows:"5"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!"))),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a.Group,null,r.a.createElement(C.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})),r.a.createElement(j.a,{variant:"secondary",onClick:x},"Annuler"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Sauvegarder")))))}function M(e){var a=e.data,t=e.uid,l="users/".concat(t,"/favorites"),c=Object(n.useState)(!1),o=Object(m.a)(c,2),i=o[0],u=o[1],d=Object(n.useState)(""),E=Object(m.a)(d,2),p=E[0],f=E[1];Object(n.useEffect)((function(){Object(s.firestore)().collection(l).where("id","==",a.id).get().then((function(e){e.size&&(u(!0),f(e.docs[0].ref.path))}))}));return r.a.createElement(N.a,{icon:S.d,pull:"right",size:"lg",onClick:function(e){i?(Object(s.firestore)().doc(p).delete(),u(!1),f("")):(Object(s.firestore)().collection(l).add(a),u(!0)),e.stopPropagation(),e.preventDefault()},color:i?"green":""})}var U=t(108),W=t(109);function R(){var e=Object(i.m)().id,a=Object(q.b)(u.a.firestore().doc("paroles/".concat(e)),{snapshotListenOptions:{includeMetadataChanges:!0}}),t=Object(m.a)(a,3),n=t[0],l=t[1],c=t[2];return r.a.createElement("div",null,c&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",c),l&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),n&&r.a.createElement(U.a,{fluid:!0},r.a.createElement(W.a,null,r.a.createElement("h1",null,n.data().titre),r.a.createElement("pre",null,n.data().parole))))}var V=t(116),J=t(118),Y=t(110),Z=t(111);function $(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,3),t=a[0],n=a[1],l=a[2];return r.a.createElement("div",null,l&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",l.message),n&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),t&&r.a.createElement(V.a.Container,{id:"left-tabs-example",defaultActiveKey:"third"},r.a.createElement(k.a,null,r.a.createElement(w.a,{md:3},r.a.createElement(b.a,{variant:"tabs",className:"flex-md-column mb-1"},r.a.createElement(b.a.Item,null,r.a.createElement(b.a.Link,{eventKey:"first"},r.a.createElement(N.a,{icon:S.b}),r.a.createElement(N.a,{icon:S.a}))),r.a.createElement(b.a.Item,null,r.a.createElement(b.a.Link,{eventKey:"second"},r.a.createElement(N.a,{icon:S.d}))),r.a.createElement(b.a.Item,null,r.a.createElement(b.a.Link,{eventKey:"third"},r.a.createElement(N.a,{icon:S.f}))))),r.a.createElement(w.a,{md:9},r.a.createElement(V.a.Content,null,r.a.createElement(V.a.Pane,{eventKey:"third"},r.a.createElement(_,{uid:t.uid})),r.a.createElement(V.a.Pane,{eventKey:"first"},r.a.createElement(X,{uid:t.uid})),r.a.createElement(V.a.Pane,{eventKey:"second"},r.a.createElement(Q,{uid:t.uid})))))),!t&&r.a.createElement("p",null,"Pas de profile pour vous xD. Veuillez cr\xe9er un compte!"))}function _(e){var a=e.uid,t=Object(q.b)(Object(s.firestore)().doc("users/".concat(a))),n=Object(m.a)(t,3),l=n[0],c=n[1],o=n[2];return r.a.createElement("div",null,r.a.createElement(J.a,{className:"mb-3",body:!0},"Profile"),o&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",o.message),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement(J.a,{border:"light",className:"text-center"},r.a.createElement(k.a,null,r.a.createElement(w.a,null),r.a.createElement(w.a,null,r.a.createElement(Y.a,{src:"https://via.placeholder.com/300",roundedCircle:!0})),r.a.createElement(w.a,null)),r.a.createElement(J.a.Body,null,r.a.createElement(J.a.Title,null,l.data().lastname," ",l.data().firstname),r.a.createElement(J.a.Text,null,"Nom utilisateur: ",l.data().username),r.a.createElement(J.a.Text,null,"Cr\xe9er le: ",l.data().dateCreatedAccount.toDate().toString()))))}function Q(e){var a=e.uid,t=Object(q.a)(Object(s.firestore)().collection("users/".concat(a,"/favorites")),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,r.a.createElement(J.a,{className:"mb-3",body:!0},"Favoris"),i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i.message),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement(Z.a,null,l.docs.map((function(e,a){return r.a.createElement(J.a,{key:e.id,border:"dark"},r.a.createElement(J.a.Header,null,a+1,r.a.createElement(N.a,{icon:S.e,pull:"right",size:"lg",onClick:function(a){return t=e.ref.path,n=a,Object(s.firestore)().doc(t).delete(),void n.preventDefault();var t,n},color:"red"})),r.a.createElement(J.a.Body,null,r.a.createElement(J.a.Title,null,e.data().titre),r.a.createElement(J.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artiste),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e par ",r.a.createElement("cite",{title:e.data().createBy},e.data().createBy)),r.a.createElement(J.a.Link,{as:o.Link,to:"/paroletahitienne/liste=".concat(e.data().id)},"Consulter")))}))))}function X(e){var a=e.uid,t=Object(q.a)(Object(s.firestore)().collection("users/".concat(a,"/chansons")),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,r.a.createElement(J.a,{className:"mb-3",body:!0},"Chansons"),i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i.message),!i&&r.a.createElement(L.a,{variant:"info"},"La liste des chansons que vous avez contribu\xe9es \xe0 ajouter!"),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement(Z.a,null,l.docs.map((function(e,a){return r.a.createElement(J.a,{key:e.id,border:"success"},r.a.createElement(J.a.Header,null,a+1),r.a.createElement(J.a.Body,null,r.a.createElement(J.a.Title,null,e.data().titre),r.a.createElement(J.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artiste),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e le ",r.a.createElement("cite",{title:e.data().createAt.toDate().toString()},e.data().createAt.toDate().toString())),r.a.createElement(J.a.Link,{as:o.Link,to:"/paroletahitienne/liste=".concat(e.data().id)},"Consulter")))}))))}var ee=function(){return r.a.createElement(o.BrowserRouter,null,r.a.createElement(p,null,r.a.createElement(T,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.g,null,r.a.createElement(i.d,{exact:!0,path:"/paroletahitienne/",component:z}),r.a.createElement(i.d,{exact:!0,path:"/paroletahitienne/liste",component:H}),r.a.createElement(i.d,{exact:!0,path:"/paroletahitienne/liste=:id",component:R}),r.a.createElement(i.d,{exact:!0,path:"/paroletahitienne/profile",component:$})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,a,t){e.exports=t(101)},85:function(e,a,t){}},[[80,1,2]]]);
//# sourceMappingURL=main.939d7e46.chunk.js.map