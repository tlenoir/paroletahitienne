(this.webpackJsonpparoleheritage=this.webpackJsonpparoleheritage||[]).push([[0],{106:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(30),o=(t(86),t(87),t(12)),i=t(34);var c=t(18),u=t(15),s=t(7),m=t(60),d=t.n(m),p=t(8),E=(t(89),t(91),t(93),t(107),t(69)),f=t(47);Object(p.initializeApp)({apiKey:"AIzaSyC7NOgNI4R8tlbLU6KW3hmoDSh_q2nZz40",authDomain:"parole-cce00.firebaseapp.com",databaseURL:"https://parole-cce00.firebaseio.com",projectId:"parole-cce00",storageBucket:"parole-cce00.appspot.com",messagingSenderId:"129631543892",appId:"1:129631543892:web:04f736403b7ce0f5ce83c1",measurementId:"G-4592WN0SEC"});var b=r.a.createContext({storage:p.storage,auth:p.auth,database:p.database,firestore:p.firestore,useDocument:f.b,useCollection:f.a,user:Object(p.auth)().currentUser,addParole:function(e){return new Promise},editParole:function(e){return new Promise},doSignUpWithEmailAndPasswd:function(e){return new Promise},doSignInWithEmailAndPasswd:function(e){return new Promise},doSignInWithFacebook:function(){},doSignInWithGoogle:function(){}});function h(e){var a=e.children,t=Object(E.a)(Object(p.auth)()),n=Object(s.a)(t,1)[0],l={storage:p.storage,auth:p.auth,database:p.database,firestore:p.firestore,useDocument:f.b,useCollection:f.a,user:n,addParole:function(e){return new Promise((function(a,t){Object(p.firestore)().collection("chansons").add(Object(u.a)({},e)).then((function(e){a(e)})).catch((function(e){t(e)}))}))},editParole:function(e){return new Promise((function(a,t){var r=Object(p.firestore)().doc("paroles/".concat(e.id)),l=n?n.displayName:"anonymous";Object(p.firestore)().runTransaction((function(a){var t,n,o;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.a.awrap(a.get(r));case 2:t=i.sent,n=String(t.data().paroles),o=String(t.data().ajout_par),a.update(r,{paroles:e.edit,editBy:l,date_edit:e.date_edit}),Object(p.firestore)().collection("notifications/".concat(o,"/chansons")).add({paroles:[n,e.edit],reference:r,editee_par:l});case 7:case"end":return i.stop()}}))}))}))},doSignUpWithEmailAndPasswd:function(e){return new Promise((function(a,t){Object(p.firestore)().collection("utilisateurs").where("utilsateur","==",e.utilsateur).get().then((function(n){0===n.size?Object(p.auth)().createUserWithEmailAndPassword(e.email,e.passwd).then((function(a){return Object(p.firestore)().collection("utilisateurs").doc(a.user.uid).set(Object(u.a)({},e,{passwd:""}))})).then((function(){return Object(p.auth)().currentUser.sendEmailVerification({url:"https://tlenoir.github.com/paroleheritage/"})})).then((function(){Object(p.auth)().currentUser.updateProfile({displayName:e.utilsateur}),a(Object(p.auth)().currentUser)})).catch((function(e){t(e)})):t({message:"Ce nom d'utilisateur est d\xe9j\xe0 utilis\xe9!"})}))}))},doSignInWithEmailAndPasswd:function(e){return new Promise((function(a,t){Object(p.auth)().signInWithEmailAndPassword(e.email,e.passwd).then((function(e){a(e)})).catch((function(e){t(e)}))}))},doSignInWithFacebook:function(){return Object(p.auth)().signInWithPopup(new p.auth.FacebookAuthProvider).then((function(e){Object(p.firestore)().collection("utilisateurs").doc(e.user.uid).set({utilisateur:e.user.displayName,avatar:e.user.photoURL+"?type=large",email:e.user.email,date_creation:e.user.metadata.creationTime,prenom:e.additionalUserInfo.profile.first_name,nom:e.additionalUserInfo.profile.last_name})}))},doSignInWithGoogle:function(){return Object(p.auth)().signInWithPopup(new p.auth.GoogleAuthProvider).then((function(e){console.log(e),Object(p.firestore)().collection("utilisateurs").doc(e.user.uid).set({utilisateur:e.user.displayName,avatar:e.user.photoURL,email:e.user.email,date_creation:e.user.metadata.creationTime,prenom:e.additionalUserInfo.profile.given_name,nom:e.additionalUserInfo.profile.family_name})}))}};return r.a.createElement(b.Provider,{value:l},a)}var g=t(109),v=t(110),O=t(111),j=t(73),C=t(119),y=t(120),k=t(75),w=t(112),x=t(14),I=t(16),S=t(43),P=t.n(S),L=(t(65),{orderBy:"titre"});function G(e,a){switch(a.type){case"artiste":return{orderBy:"artistes"};case"groupe":return{orderBy:"groupes"};case"date":return{orderBy:"date_ajout"};case"titre":return{orderBy:"titre"};default:return e}}function N(){var e=Object(n.useContext)(b),a=e.user,t=Object(n.useState)(!1),l=Object(s.a)(t,2),i=l[0],m=l[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),E=p[0],f=p[1],h=Object(n.useState)(!1),g=Object(s.a)(h,2),v=g[0],O=g[1],S=Object(n.useState)({paroles:"",artistes:"",titre:"",groupes:""}),L=Object(s.a)(S,2),G=L[0],N=L[1],q=function(){return O(!1)},_=function(e){return N(Object(u.a)({},G,Object(c.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){E&&e.addParole(G).then((function(){O(!1),N({paroles:"",artistes:"",titre:"",groupes:""})})).then((function(){f(!1)}))}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{onClick:function(){return O(!0)},variant:"link"},r.a.createElement(x.a,{className:"mr-1",icon:I.d}),"Ajouter une chanson"),r.a.createElement(C.a,{size:"lg",show:v,onHide:q},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Ajouter une Chanson")),r.a.createElement(y.a,{noValidate:!0,validated:i,onSubmit:function(e){e.currentTarget.checkValidity()&&(N(Object(u.a)({},G,{date_ajout:P()().local("fr").format("LLL"),ajout_par:a?a.displayName:"anonymous",uid:a?a.uid:"anonymous",artistes:G.artistes.length>0?G.artistes.split(""):[""],groupes:G.groupes.length>0?G.groupes.split(""):[""]})),f(!0)),m(!0),e.preventDefault()}},r.a.createElement(C.a.Body,null,r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridTiltle"},r.a.createElement(y.a.Label,null,"Titre"),r.a.createElement(y.a.Control,{readOnly:E,required:!0,value:G.titre,name:"titre",onChange:_,type:"text"})),r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridArtiste"},r.a.createElement(y.a.Label,null,"Artiste"),r.a.createElement(y.a.Control,{readOnly:E,value:G.artistes,name:"artistes",onChange:_,type:"text",placeholder:"art1art2"}))),r.a.createElement(y.a.Group,{controlId:"formGridGroup"},r.a.createElement(y.a.Label,null,"Groupe"),r.a.createElement(y.a.Control,{readOnly:E,value:G.groupes,name:"groupes",onChange:_,type:"text",placeholder:"grp1grp2"})),r.a.createElement(y.a.Group,{controlId:"exampleForm.Control readOnly={submit}Parole"},r.a.createElement(y.a.Label,null,"Parole"),r.a.createElement(y.a.Control,{readOnly:E,value:G.paroles,name:"paroles",onChange:_,as:"textarea",rows:"6"}))),r.a.createElement(C.a.Footer,null,r.a.createElement(w.a,null,r.a.createElement(j.a,{disabled:E,size:"sm",as:o.Link,to:"/",variant:"link",onClick:q},"cr\xe9ation/avanc\xe9e"),r.a.createElement(j.a,{disabled:E,variant:"outline-secondary",onClick:q},"Fermer"),r.a.createElement(j.a,{disabled:E,variant:"primary",type:"submit"},"Enregistrer"))))))}var q=t(113),_=t(76);function B(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Conditions d'utilisation"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Porro veniam quis dolorem ipsa sapiente ex, hic obcaecati ducimus culpa. Doloribus itaque ducimus temporibus impedit tempora, totam, qui aspernatur nihil rem atque assumenda officiis officia ad sunt deserunt doloremque optio in quibusdam quaerat? Optio minus fugit id consequuntur blanditiis voluptates necessitatibus. Praesentium totam ut eos sint pariatur fugiat nulla nam perspiciatis velit! Illo explicabo aut, veniam veritatis quia sit accusamus. Fugit, dicta earum quibusdam ex quia quod esse aut distinctio saepe dolor sunt itaque facere ut quasi alias velit odio repellendus molestiae voluptatem suscipit. Atque in, repellendus dolore ea beatae impedit rem eum hic sit aspernatur saepe laboriosam facilis suscipit odio, dolores similique provident, molestiae neque enim doloremque recusandae cumque id."))}var F=t(125),A=t(41);var T=t(114);function D(e){var a=e.uid,t=Object(n.useContext)(b),l=t.useDocument(t.firestore().doc("utilisateurs/".concat(a)),{snapshotListenOptions:{includeMetadataChanges:!0}}),o=Object(s.a)(l,3),i=o[0],c=o[1],u=o[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{className:"mb-3",body:!0},"Profile"),u&&r.a.createElement(g.a,{variant:"danger"},"Erreur: ",u.message),c&&r.a.createElement(v.a,{animation:"grow",variant:"primary"}),!c&&i&&r.a.createElement(F.a,{border:"light",className:"text-center"},r.a.createElement(T.a,{className:"mx-auto w-25",src:i.data().avatar?i.data().avatar:"https://via.placeholder.com/150",roundedCircle:!0}),r.a.createElement(F.a.Body,null,r.a.createElement(F.a.Title,null,i.data().nom," ",i.data().prenom),r.a.createElement(F.a.Text,null,"Nom utilisateur: ",i.data().utilisateur),r.a.createElement(F.a.Subtitle,{className:"mb-1 text-muted"},i.data().apropos),r.a.createElement(F.a.Text,null,"Membre depuis le: ",i.data().date_creation))))}var W=t(115);function z(e){var a=e.uid,t=Object(n.useContext)(b),l=t.useCollection(t.firestore().collection("favoris/".concat(a,"/all")),{snapshotListenOptions:{includeMetadataChanges:!0}}),i=Object(s.a)(l,3),c=i[0],u=i[1],m=i[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{className:"mb-3",body:!0},"Favoris"),m&&r.a.createElement(g.a,{variant:"danger"},"Erreur: ",m.message),u&&r.a.createElement(v.a,{animation:"grow",variant:"primary"}),!u&&c&&r.a.createElement(W.a,null,c.docs.map((function(e,a){return r.a.createElement(F.a,{key:e.id,border:"dark"},r.a.createElement(F.a.Header,null,a+1,r.a.createElement(x.a,{icon:I.f,pull:"right",size:"lg",onClick:function(a){return n=e.ref.path,r=a,t.firestore().doc(n).delete(),void r.preventDefault();var n,r},color:"red"})),r.a.createElement(F.a.Body,null,r.a.createElement(F.a.Title,null,e.data().titre),r.a.createElement(F.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artiste),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e par ",r.a.createElement("cite",{title:e.data().ajout_par},e.data().createBy)),r.a.createElement(F.a.Link,{as:o.Link,to:"/liste=".concat(e.data().id)},"Consulter")))}))))}function U(e){var a=e.uid,t=Object(n.useContext)(b),l=t.useCollection(t.firestore().collection("chansons").where("uid","==",a),{snapshotListenOptions:{includeMetadataChanges:!0}}),i=Object(s.a)(l,3),c=i[0],u=i[1],m=i[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{className:"mb-3",body:!0},"Chansons"),m&&r.a.createElement(g.a,{variant:"danger"},"Erreur: ",m.message),!m&&r.a.createElement(g.a,{variant:"info"},"La liste des chansons que vous avez contribu\xe9es \xe0 ajouter!"),u&&r.a.createElement(v.a,{animation:"grow",variant:"primary"}),!u&&c&&r.a.createElement(W.a,null,c.docs.map((function(e,a){return r.a.createElement(F.a,{key:e.id,border:"success"},r.a.createElement(F.a.Header,null,a+1,r.a.createElement(x.a,{icon:I.f,pull:"right",size:"lg",onClick:function(a){return function(e,a){t.firestore().doc("paroles/".concat(e.data().id)).delete(),t.firestore().doc(e.ref.path).delete(),a.preventDefault()}(e,a)},color:"red"})),r.a.createElement(F.a.Body,null,r.a.createElement(F.a.Title,null,e.data().titre),r.a.createElement(F.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artistes),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e le ",r.a.createElement("cite",{title:e.data().date_ajout},e.data().date_ajout)),r.a.createElement(F.a.Link,{as:o.Link,to:"/liste=".concat(e.id)},"Consulter")))}))))}var H=t(124),R=t(116),K=t(122),M=t(117);function V(e){var a=e.uid,t=Object(n.useContext)(b),l=t.useCollection(t.firestore().collection("notifications/".concat(a,"/chansons")),{snapshotListenOptions:{includeMetadataChanges:!0}}),o=Object(s.a)(l,1)[0];return r.a.createElement(K.a.Link,{eventKey:"four"},r.a.createElement(x.a,{icon:I.a}),o&&o.size>0&&r.a.createElement(M.a,{className:"float-right",variant:"info"},o.size))}function J(e){var a=e.uid,t=Object(n.useContext)(b),l=t.useCollection(t.firestore().collection("notifications/".concat(a,"/chansons")),{snapshotListenOptions:{includeMetadataChanges:!0}}),o=Object(s.a)(l,1)[0];return r.a.createElement("div",null,r.a.createElement(F.a,{className:"mb-3",body:!0},"Notifications"),o&&o.size>0&&r.a.createElement("div",null,r.a.createElement(g.a,{variant:"info"},"Chansons Re-edit\xe9es ",o.size),o.docs.map((function(e){return r.a.createElement(R.a,{key:e.id},r.a.createElement(k.a,{md:6},r.a.createElement("pre",null,e.data().parole[0])),r.a.createElement(k.a,{md:6},r.a.createElement("pre",null,e.data().parole[1])))}))))}var Z=[{path:"/",component:function(){return r.a.createElement("div",null,"Accueil page.")},exact:!0,name:"Accueil"},{path:"/apropos",component:function(){return r.a.createElement("div",null,"\xc0 propos page.")},exact:!0,name:"\xc0 propos"},{path:"/liste",component:function(){var e=Object(n.useContext)(b),a=Object(i.k)(),t=Object(n.useReducer)(G,L),l=Object(s.a)(t,2),o=l[0],c=l[1],u=e.useCollection(e.firestore().collection("chansons").orderBy(o.orderBy),{snapshotListenOptions:{includeMetadataChanges:!0}}),m=Object(s.a)(u,3),d=m[0],p=m[1],E=m[2];return r.a.createElement(r.a.Fragment,null,E&&r.a.createElement(g.a,{variant:"danger"},"Erreur: ",E.message),p&&r.a.createElement(v.a,{animation:"grow",variant:"primary"}),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null),r.a.createElement(O.a,{striped:!0,responsive:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",{onClick:function(){return c({type:"titre"})}},"Titre"),r.a.createElement("th",{onClick:function(){return c({type:"artiste"})}},"Artiste"),r.a.createElement("th",{onClick:function(){return c({type:"groupe"})}},"Groupe"),r.a.createElement("th",{onClick:function(){return c({type:"date"})}},"Date d'ajout"))),r.a.createElement("tbody",null,d.docs.map((function(e,t){return r.a.createElement("tr",{key:e.id,onClick:function(t){return n=t,r=e.id,a.push("/liste=".concat(r)),void n.preventDefault();var n,r}},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.data().titre),r.a.createElement("td",null,e.data().artistes.map((function(e){return r.a.createElement("span",null,e," ")}))),r.a.createElement("td",null,e.data().groupes.map((function(e){return r.a.createElement("span",null,e," ")}))),r.a.createElement("td",null,e.data().date_ajout))}))))))},exact:!0,name:"Liste"}],$=[{path:"/liste=:id",component:function(){var e=Object(n.useContext)(b),a=Object(i.m)().id,t=Object(n.useState)(!0),l=Object(s.a)(t,2),o=l[0],m=l[1],d=Object(n.useState)({paroles:"",titre:""}),p=Object(s.a)(d,2),E=p[0],f=p[1],h=e.useDocument(e.firestore().doc("chansons/".concat(a)),{snapshotListenOptions:{includeMetadataChanges:!0}}),O=Object(s.a)(h,3),C=O[0],k=O[1],w=O[2],x=function(e){f(Object(u.a)({},E,Object(c.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){void 0!==C&&C.exists?f({titre:C.data().titre,paroles:C.data().paroles}):f({titre:"Ce document n'existe pas."})}),[C]),r.a.createElement(r.a.Fragment,null,w&&r.a.createElement(g.a,{variant:"danger"},"Erreur: ",w.message),k&&r.a.createElement(v.a,{animation:"grow",variant:"primary"}),C&&r.a.createElement(q.a,null,r.a.createElement(j.a,{disabled:!C.exists,variant:"link",size:"sm",onClick:function(e){m(!1),e.preventDefault()}},"edit\xe9"),r.a.createElement(y.a,null,r.a.createElement(y.a.Group,{controlId:"exampleForm.ControlInputTitre"},r.a.createElement(y.a.Label,{srOnly:o},"Titre"),r.a.createElement(y.a.Control,{size:"lg",value:E.titre,name:"titre",plaintext:o,required:!0,onChange:x,readOnly:o,type:"text"})),r.a.createElement(y.a.Group,{controlId:"exampleForm.ControlTextareaParole"},r.a.createElement(y.a.Label,{srOnly:o},"Parole"),r.a.createElement(y.a.Control,{value:E.paroles,name:"paroles",plaintext:o,required:!0,onChange:x,readOnly:o,as:_.a})))))},exact:!0},{path:"/signup",component:function(){var e=Object(n.useContext)(b),a=Object(i.k)(),t=Object(n.useState)(!1),l=Object(s.a)(t,2),o=l[0],m=l[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),E=p[0],f=p[1],h=Object(n.useState)(""),O=Object(s.a)(h,2),w=O[0],x=O[1],I=Object(n.useState)(!1),S=Object(s.a)(I,2),L=S[0],G=S[1],N=Object(n.useState)({email:"",passwd:"",nom:"",prenom:"",utilsateur:"",ville:"",apropos:"",date_naissance:""}),q=Object(s.a)(N,2),_=q[0],F=q[1],A=function(){return G(!1)},T=function(e){F(Object(u.a)({},_,Object(c.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){E&&e.doSignUpWithEmailAndPasswd(_).then((function(){F({email:"",passwd:"",nom:"",prenom:"",utilsateur:"",ville:"",apropos:"",date_naissance:""}),m(!1)})).then((function(){a.push("/")})).catch((function(e){x(e.message),f(!1)}))}),[E]),r.a.createElement(y.a,{className:"mb-4",noValidate:!0,validated:o,onSubmit:function(a){a.currentTarget.checkValidity()&&(F(Object(u.a)({},_,{date_creation:e.firestore.Timestamp.fromDate(new Date),date_naissance:P()(_.date_naissance).local("fr").format("LL")})),f(!0)),m(!0),a.preventDefault()}},r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridEmail"},r.a.createElement(y.a.Label,null,"Email"),r.a.createElement(y.a.Control,{required:!0,name:"email",value:_.email,onChange:T,type:"email",placeholder:"parole@tahitienne.com"})),r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridMotdepasse"},r.a.createElement(y.a.Label,null,"Mot de passe"),r.a.createElement(y.a.Control,{required:!0,name:"passwd",value:_.passwd,onChange:T,type:"password"}))),r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:k.a,md:"4",controlId:"formGridNom"},r.a.createElement(y.a.Label,null,"Nom"),r.a.createElement(y.a.Control,{required:!0,name:"nom",value:_.nom,onChange:T,type:"text",placeholder:"Parole"})),r.a.createElement(y.a.Group,{as:k.a,md:"4",controlId:"formGridPrenom"},r.a.createElement(y.a.Label,null,"Pr\xe9nom"),r.a.createElement(y.a.Control,{required:!0,name:"prenom",value:_.prenom,onChange:T,type:"text",placeholder:"Tahitienne"})),r.a.createElement(y.a.Group,{as:k.a,md:"4",controlId:"formGridNaissance"},r.a.createElement(y.a.Label,null,"Date de naisssance"),r.a.createElement(y.a.Control,{required:!0,name:"date_naissance",value:_.date_naissance,onChange:T,type:"date"}))),r.a.createElement("hr",null),r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridUtilisateur"},r.a.createElement(y.a.Label,null,"Nom utilisateur"),r.a.createElement(y.a.Control,{required:!0,name:"utilsateur",type:"text",value:_.utilsateur,onChange:T})),r.a.createElement(y.a.Group,{as:k.a,md:"6",controlId:"formGridville"},r.a.createElement(y.a.Label,null,"Ville"),r.a.createElement(y.a.Control,{required:!0,name:"ville",value:_.ville,onChange:T,type:"text",placeholder:"Paea"}))),r.a.createElement("hr",null),r.a.createElement(y.a.Row,null),r.a.createElement(y.a.Group,{as:k.a,controlId:"formGridApropos"},r.a.createElement(y.a.Label,null,"\xc0 propos"),r.a.createElement(y.a.Control,{name:"apropos",as:"textarea",value:_.apropos,onChange:T})),r.a.createElement(y.a.Group,{id:"formGridCheckbox"},r.a.createElement(j.a,{variant:"link",onClick:function(){return G(!0)},size:"sm"},"conditions d'utilisation"),r.a.createElement(y.a.Check,{required:!0,className:"text-left",type:"checkbox",label:"J'accepte"})),r.a.createElement(j.a,{variant:E?"link":"primary",type:"submit",disabled:E},E?r.a.createElement(v.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):"Inscription"),w&&r.a.createElement(g.a,{className:"mt-2",variant:"danger"},w),r.a.createElement(C.a,{scrollable:!0,show:L,onHide:A},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Parole H\xe9ritage")),r.a.createElement(C.a.Body,null,r.a.createElement(B,null)),r.a.createElement(C.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:A},"Close"))))},exact:!0},{path:"/signin",component:function(){var e=Object(n.useContext)(b),a=Object(i.k)(),t=Object(n.useState)(!1),l=Object(s.a)(t,2),m=l[0],d=l[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),f=E[0],h=E[1],v=Object(n.useState)(!1),O=Object(s.a)(v,2),C=O[0],k=O[1],w=Object(n.useState)({email:"",passwd:""}),I=Object(s.a)(w,2),S=I[0],P=I[1],L=function(e){P(Object(u.a)({},S,Object(c.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,r.a.createElement(F.a.Header,null,r.a.createElement(F.a.Title,null,"Connectez-vous via",r.a.createElement(x.a,{className:"ml-2",onClick:function(){e.doSignInWithFacebook()},icon:A.a,color:"#3b5998"}),r.a.createElement(x.a,{className:"ml-2",onClick:function(){e.doSignInWithGoogle()},icon:A.b,color:"#DD4B39"}))),r.a.createElement(y.a,{noValidate:!0,validated:m,onSubmit:function(t){t.currentTarget.checkValidity()&&(k(!0),e.doSignInWithEmailAndPasswd(S).then((function(){P({email:"",passwd:""})})).then((function(){a.push("/")})).catch((function(e){h(e.message),k(!1)}))),d(!0),t.preventDefault()}},r.a.createElement(F.a.Body,null,r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email/Identifiant"),r.a.createElement(y.a.Control,{required:!0,type:"email",readOnly:C,value:S.email,name:"email",onChange:L})),r.a.createElement(y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{required:!0,type:"password",readOnly:C,value:S.passwd,name:"passwd",onChange:L}))),r.a.createElement(F.a.Footer,null,r.a.createElement(j.a,{as:o.Link,to:"/signup",variant:"link",disabled:C},"cr\xe9er un compte"),r.a.createElement(j.a,{variant:"primary",type:"submit",disabled:C},"S'identifier"),f&&r.a.createElement(g.a,{variant:"danger"},f)))))},exact:!0},{path:"/profile",component:function(){var e=Object(n.useContext)(b).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a.Container,{id:"left-tabs-example",defaultActiveKey:"third"},r.a.createElement(R.a,null,r.a.createElement(k.a,{md:3},r.a.createElement(K.a,{variant:"tabs",className:"flex-md-column mb-1"},r.a.createElement(K.a.Item,null,r.a.createElement(K.a.Link,{eventKey:"first"},r.a.createElement(x.a,{icon:I.c}),r.a.createElement(x.a,{icon:I.b}))),r.a.createElement(K.a.Item,null,r.a.createElement(K.a.Link,{eventKey:"second"},r.a.createElement(x.a,{icon:I.e}))),r.a.createElement(K.a.Item,null,r.a.createElement(V,{uid:e.uid})),r.a.createElement(K.a.Item,null,r.a.createElement(K.a.Link,{eventKey:"third"},r.a.createElement(x.a,{icon:I.g}))))),r.a.createElement(k.a,{md:9},r.a.createElement(H.a.Content,null,r.a.createElement(H.a.Pane,{eventKey:"third"},r.a.createElement(D,{uid:e.uid})),r.a.createElement(H.a.Pane,{eventKey:"first"},r.a.createElement(U,{uid:e.uid})),r.a.createElement(H.a.Pane,{eventKey:"second"},r.a.createElement(z,{uid:e.uid})),r.a.createElement(H.a.Pane,{eventKey:"four"},r.a.createElement(J,{uid:e.uid})))))))},exact:!0},{path:"*",component:function(){return r.a.createElement(F.a,{text:"info",border:"info",body:!0},"Cette page n'est pas disponible.")}}],Q=r.a.createContext({themes:{button_submit:"",button_link:"",button_close:"",bg:"",color:""},updateThemes:function(){}});function X(e){var a=e.children,t=Object(n.useState)({button_submit:"primary",button_link:"link",button_close:"secondary",bg:"light",color:"red"}),l=Object(s.a)(t,2),o=l[0],c=l[1],u=Object(i.l)();return Object(n.useEffect)((function(){var e,a=u.pathname.slice(1);a.length>0?document.title=(e=a).charAt(0).toUpperCase()+e.slice(1):document.title="Parole H\xe9ritage"}),[u]),r.a.createElement(Q.Provider,{value:{themes:o,updateThemes:c}},a)}function Y(e){var a=e.children,t=Object(n.useContext)(b),l=Object(i.n)(["/profile"]),o=Object(i.n)(["/signin","/signup"]);return!t.user&&l?r.a.createElement(i.c,{to:"/signin"}):t.user&&o?r.a.createElement(i.c,{to:"/"}):r.a.createElement(r.a.Fragment,null,a)}var ee=t(118),ae=t(123),te=t(77),ne=t(121);function re(){var e=Object(n.useContext)(b),a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1],m=Object(n.useState)(!1),d=Object(s.a)(m,2),p=d[0],E=d[1],f=Object(n.useState)(""),h=Object(s.a)(f,2),v=h[0],O=h[1],k=Object(n.useState)(!1),w=Object(s.a)(k,2),I=w[0],S=w[1],P=Object(n.useState)({email:"",passwd:""}),L=Object(s.a)(P,2),G=L[0],N=L[1],q=function(e){N(Object(u.a)({},G,Object(c.a)({},e.target.name,e.target.value)))},_=function(){i(!1),O("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"dark",onClick:function(){return i(!0)}},"S'identifier"),r.a.createElement(C.a,{show:l,onHide:_},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Connectez-vous via",r.a.createElement(x.a,{className:"ml-2",onClick:function(){e.doSignInWithFacebook()},icon:A.a,color:"#3b5998"}),r.a.createElement(x.a,{className:"ml-2",onClick:function(){e.doSignInWithGoogle()},icon:A.b,color:"#DD4B39"}))),r.a.createElement(y.a,{noValidate:!0,validated:p,onSubmit:function(a){a.currentTarget.checkValidity()&&(S(!0),e.doSignInWithEmailAndPasswd(G).then((function(){i(!1),N({email:"",passwd:""})})).catch((function(e){O(e.message),S(!1)}))),E(!0),a.preventDefault()}},r.a.createElement(C.a.Body,null,r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email/Identifiant"),r.a.createElement(y.a.Control,{required:!0,type:"email",readOnly:I,value:G.email,name:"email",onChange:q})),r.a.createElement(y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{required:!0,type:"password",readOnly:I,value:G.passwd,name:"passwd",onChange:q}))),r.a.createElement(C.a.Footer,null,r.a.createElement(j.a,{as:o.Link,to:"/signup",variant:"link",onClick:_,disabled:I},"cr\xe9er un compte"),r.a.createElement(j.a,{variant:"secondary",onClick:_,disabled:I},"Fermer"),r.a.createElement(j.a,{variant:"primary",type:"submit",disabled:I},"S'identifier"),v&&r.a.createElement(g.a,{variant:"danger"},v)))))}function le(){var e=Object(n.useContext)(b),a=e.user;return r.a.createElement(ne.a,null,r.a.createElement(ne.a.Toggle,{variant:"info",id:"dropdown-basic"},r.a.createElement(x.a,{className:"mr-1",icon:I.h}),a.displayName),r.a.createElement(ne.a.Menu,{className:"dropdown-menu-md-right"},r.a.createElement(ne.a.Item,{as:o.Link,to:"/profile"},"Profile"),r.a.createElement(ne.a.Divider,null),r.a.createElement(ne.a.Item,{onClick:function(){e.auth().signOut()}},"D\xe9connecter")))}function oe(){var e=Object(n.useContext)(b).user;return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(le,null),!e&&r.a.createElement(re,null))}function ie(){return r.a.createElement(ae.a,{className:"mb-2",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(ae.a.Brand,{href:"/"},"Parole H\xe9ritage"),r.a.createElement(ae.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(ae.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(K.a,{className:"mr-auto"},Z.map((function(e){return r.a.createElement(te.LinkContainer,{key:e.path,to:e.path},r.a.createElement(K.a.Link,null,e.name))}))),r.a.createElement(oe,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(l.render)(r.a.createElement((function(){return r.a.createElement(o.HashRouter,{basename:"/"},r.a.createElement(X,null,r.a.createElement(h,null,r.a.createElement(ie,null),r.a.createElement(ee.a,null,r.a.createElement(Y,null,r.a.createElement(i.g,null,Z.map((function(e){return r.a.createElement(i.d,Object.assign({key:e.path},e))})),$.map((function(e){return r.a.createElement(i.d,Object.assign({key:e.path},e))}))))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,a,t){e.exports=t(106)},86:function(e,a,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.c790b02c.chunk.js.map