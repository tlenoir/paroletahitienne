(this.webpackJsonpapparole=this.webpackJsonpapparole||[]).push([[0],{101:function(e,a,t){},102:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(27),c=t.n(l),o=(t(86),t(87),t(15)),i=t(32),m=t(11),s=t(7),u=t.n(s),d=(t(48),t(61),t(49),t(103),t(28));u.a.initializeApp({apiKey:"AIzaSyC7NOgNI4R8tlbLU6KW3hmoDSh_q2nZz40",authDomain:"parole-cce00.firebaseapp.com",databaseURL:"https://parole-cce00.firebaseio.com",projectId:"parole-cce00",storageBucket:"parole-cce00.appspot.com",messagingSenderId:"129631543892",appId:"1:129631543892:web:04f736403b7ce0f5ce83c1",measurementId:"G-4592WN0SEC"});var E=r.a.createContext({user:{uid:"",displayName:"",email:"",emailVerified:Boolean,metadata:{creationTime:"",lastSignInTime:""},photoURL:"",phoneNumber:""}});function p(e){var a=e.children,t=Object(d.a)(u.a.auth()),n=Object(m.a)(t,1)[0];return r.a.createElement(E.Provider,{value:n},a)}var f=t(116),v=t(118),b=t(63),h=t(38),g=t(40),y=t(105),j=t(74),O=t(113),C=t(115),k=t(106),w=t(76),L=t(107),x=t(114),N=t(20),I=t(21);function S(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0];return r.a.createElement("span",null,!a&&r.a.createElement(P,null),a&&r.a.createElement(A,null))}function P(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)({email:"",passwd:"",lastname:"",firstname:"",username:""}),i=Object(m.a)(o,2),s=i[0],d=i[1],E=function(e){d(Object(g.a)({},s,Object(h.a)({},e.target.name,e.target.value)))},p=Object(n.useState)(!1),f=Object(m.a)(p,2),v=f[0],b=f[1],x=Object(n.useState)(!1),N=Object(m.a)(x,2),I=N[0],S=N[1],P=function(){return b(!1)},A=function(){return S(!1)};return r.a.createElement("span",null,r.a.createElement(y.a,null,r.a.createElement(j.a,{className:"ml-1",onClick:function(){return b(!0)},variant:"link"},"Se connecter")),r.a.createElement(O.a,{show:v,onHide:P},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Connectez-vous")),r.a.createElement(C.a,{onSubmit:function(e){u.a.auth().signInWithEmailAndPassword(s.email,s.passwd).then((function(){b(!1),c("")})).catch((function(e){e.code===D&&c(e.message)})),e.preventDefault()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Identifiant"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{value:s.email,name:"email",onChange:E,type:"email"}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextPassword"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Mot de passe"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"password",value:s.passwd,name:"passwd",onChange:E})))),r.a.createElement(O.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:P},"Fermer"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"S'identifier"),l&&r.a.createElement(L.a,{variant:"danger"},l))),r.a.createElement(y.a,null,r.a.createElement(j.a,{size:"sm",onClick:function(){b(!1),S(!0)},variant:"link"},"Cr\xe9er un compte"))),r.a.createElement(O.a,{show:I,onHide:A},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Cr\xe9er un nouvel utilisateur")),r.a.createElement(C.a,{onSubmit:function(a){u.a.auth().createUserWithEmailAndPassword(s.email,s.passwd).then((function(e){return u.a.database().ref("users/".concat(e.user.uid)).set({email:s.email,firstname:s.firstname,lastname:s.lastname,dateCreatedAccount:u.a.firestore.Timestamp.fromDate(new Date),username:s.username})})).then((function(){return u.a.auth().currentUser.sendEmailVerification({url:"http://tlenoir.github.io/paroletahitienne"})})).then((function(){return u.a.auth().currentUser.updateProfile({displayName:s.username})})).then((function(){d(Object(g.a)({},s,{username:"",email:"",passwd:"",lastname:"",firstname:""})),c(""),e.history.push("/")})).catch((function(e){e.code===B&&c(e.message)})),a.preventDefault()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Email"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"email",required:!0,value:s.email,name:"email",onChange:E}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextPassword"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Mot de passe"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{required:!0,value:s.passwd,name:"passwd",onChange:E,type:"password"}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Nom"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{className:"text-capitalize",type:"text",required:!0,value:s.lastname,name:"lastname",onChange:E}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Pr\xe9nom"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{className:"text-capitalize",type:"text",required:!0,value:s.firstname,name:"firstname",onChange:E}))),r.a.createElement(C.a.Group,{as:k.a,controlId:"formPlaintextEmail"},r.a.createElement(C.a.Label,{column:!0,sm:"2"},"Nom utilsateur"),r.a.createElement(w.a,{sm:"10"},r.a.createElement(C.a.Control,{type:"text",required:!0,value:s.username,name:"username",onChange:E})))),r.a.createElement(O.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:A},"Annuler"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Enregistrer"),l&&r.a.createElement(L.a,{variant:"danger"},l)))))}function A(){return r.a.createElement(y.a,null,r.a.createElement(x.a,null,r.a.createElement(x.a.Toggle,{variant:"link",id:"dropdown-custom-1"},r.a.createElement(N.a,{icon:I.g,size:"lg"})),r.a.createElement(x.a.Menu,{className:"dropdown-menu-md-right"},r.a.createElement(x.a.Item,{as:o.Link,to:"/profile",eventKey:"1"},"Profile"),r.a.createElement(x.a.Divider,null),r.a.createElement(x.a.Item,{onClick:function(){u.a.auth().signOut()},eventKey:"4"},"Se D\xe9connecter"))))}var B="auth/email-already-in-use",D="auth/user-not-found";function T(){return r.a.createElement(f.a,{className:"mb-1",collapseOnSelect:!0,expand:"lg",bg:"light"},r.a.createElement(f.a.Brand,{href:"/"},"React-Bootstrap"),r.a.createElement(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(f.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(v.a,{className:"mr-auto"},r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(v.a.Link,null,"Home")),r.a.createElement(b.LinkContainer,{to:"/liste"},r.a.createElement(v.a.Link,null,"Liste")))),r.a.createElement(f.a.Collapse,{className:"justify-content-end"},r.a.createElement(S,null)))}function z(){return r.a.createElement("div",null,"HomePage")}t(101);var q=t(37),G=t(108),K=t(120);function H(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0],t=Object(q.a)(u.a.firestore().collection("paroles"),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),l&&r.a.createElement("div",null,r.a.createElement(F,null),r.a.createElement(K.a,{variant:"flush"},l.docs.map((function(e){return r.a.createElement(K.a.Item,{variant:"light",as:o.Link,to:"/liste=".concat(e.id),key:e.id},e.data().titre,a&&!a.isAnonymous&&r.a.createElement(M,{data:{id:e.id,titre:e.data().titre,artiste:e.data().artiste,createBy:e.data().createBy},uid:a.uid}))})))))}function F(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,1)[0],t=Object(n.useState)(!1),l=Object(m.a)(t,2),c=l[0],o=l[1],i=Object(n.useState)({titre:"",artiste:"",parole:""}),E=Object(m.a)(i,2),p=E[0],f=E[1],v=Object(n.useState)(!1),b=Object(m.a)(v,2),y=b[0],k=b[1],L=function(e){f(Object(g.a)({},p,Object(h.a)({},e.target.name,e.target.value)))},x=function(){o(!c)};return r.a.createElement("div",null,r.a.createElement(j.a,{variant:"link",onClick:x},r.a.createElement(N.a,{className:"mr-1",icon:I.c,size:"lg"}),"Ajouter une chanson"),r.a.createElement(O.a,{show:c,onHide:x},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Ajouter une nouvelle chanson")),r.a.createElement(C.a,{noValidate:!0,validated:y,onSubmit:function(e){e.currentTarget.checkValidity()?(Object(s.firestore)().collection("paroles").add(Object(g.a)({},p,{createAt:u.a.firestore.Timestamp.fromDate(new Date),uid:a?a.uid:"anonymous",createBy:a?a.displayName:"anonymous"})).then((function(e){a&&Object(s.firestore)().collection("users/".concat(a.uid,"/chansons")).add({id:e.id,createAt:u.a.firestore.Timestamp.fromDate(new Date),titre:p.titre,artiste:p.artiste}).then((function(){f({titre:"",artiste:"",parole:""}),k(!1)}))})),o(!1)):k(!0),e.preventDefault(),e.stopPropagation()}},r.a.createElement(O.a.Body,null,r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Group,{as:w.a,md:"4",controlId:"validationCustom01"},r.a.createElement(C.a.Label,null,"Titre"),r.a.createElement(C.a.Control,{required:!0,name:"titre",value:p.titre,onChange:L,type:"text",placeholder:"titre parole tahitienne"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!")),r.a.createElement(C.a.Group,{as:w.a,md:"8",controlId:"validationCustom02"},r.a.createElement(C.a.Label,null,"Artiste"),r.a.createElement(C.a.Control,{required:!0,name:"artiste",value:p.artiste,onChange:L,type:"text",placeholder:"artiste parole tahitienne"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!"))),r.a.createElement(C.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(C.a.Label,null,"Parole"),r.a.createElement(C.a.Control,{required:!0,name:"parole",value:p.parole,onChange:L,as:"textarea",rows:"5"}),r.a.createElement(C.a.Control.Feedback,null,"Looks good!"))),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a.Group,null,r.a.createElement(C.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})),r.a.createElement(j.a,{variant:"secondary",onClick:x},"Annuler"),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Sauvegarder")))))}function M(e){var a=e.data,t=e.uid,l="users/".concat(t,"/favorites"),c=Object(n.useState)(!1),o=Object(m.a)(c,2),i=o[0],u=o[1],d=Object(n.useState)(""),E=Object(m.a)(d,2),p=E[0],f=E[1];Object(n.useEffect)((function(){Object(s.firestore)().collection(l).where("id","==",a.id).get().then((function(e){e.size&&(u(!0),f(e.docs[0].ref.path))}))}));return r.a.createElement(N.a,{icon:I.d,pull:"right",size:"lg",onClick:function(e){i?(Object(s.firestore)().doc(p).delete(),u(!1),f("")):(Object(s.firestore)().collection(l).add(a),u(!0)),e.stopPropagation(),e.preventDefault()},color:i?"green":""})}var R=t(109),U=t(110);function W(){var e=Object(i.m)().id,a=Object(q.b)(u.a.firestore().doc("paroles/".concat(e)),{snapshotListenOptions:{includeMetadataChanges:!0}}),t=Object(m.a)(a,3),n=t[0],l=t[1],c=t[2];return r.a.createElement("div",null,c&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",c),l&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),n&&r.a.createElement(R.a,{fluid:!0},r.a.createElement(U.a,null,r.a.createElement("h1",null,n.data().titre),r.a.createElement("pre",null,n.data().parole))))}var V=t(80),J=t(117),Y=t(119),Z=t(111),$=t(112);function _(){var e=Object(d.a)(u.a.auth()),a=Object(m.a)(e,3),t=a[0],n=a[1],l=a[2];return r.a.createElement("div",null,l&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",l.message),n&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),t&&r.a.createElement(J.a.Container,{id:"left-tabs-example",defaultActiveKey:"third"},r.a.createElement(k.a,null,r.a.createElement(w.a,{md:3},r.a.createElement(v.a,{variant:"tabs",className:"flex-md-column mb-1"},r.a.createElement(v.a.Item,null,r.a.createElement(v.a.Link,{eventKey:"first"},r.a.createElement(N.a,{icon:I.b}),r.a.createElement(N.a,{icon:I.a}))),r.a.createElement(v.a.Item,null,r.a.createElement(v.a.Link,{eventKey:"second"},r.a.createElement(N.a,{icon:I.d}))),r.a.createElement(v.a.Item,null,r.a.createElement(v.a.Link,{eventKey:"third"},r.a.createElement(N.a,{icon:I.f}))))),r.a.createElement(w.a,{md:9},r.a.createElement(J.a.Content,null,r.a.createElement(J.a.Pane,{eventKey:"third"},r.a.createElement(Q,{uid:t.uid})),r.a.createElement(J.a.Pane,{eventKey:"first"},r.a.createElement(ee,{uid:t.uid})),r.a.createElement(J.a.Pane,{eventKey:"second"},r.a.createElement(X,{uid:t.uid})))))),!t&&r.a.createElement("p",null,"Pas de profile pour vous xD. Veuillez cr\xe9er un compte!"))}function Q(e){var a=e.uid,t=Object(V.a)(u.a.database().ref("users/".concat(a))),n=Object(m.a)(t,3),l=n[0],c=n[1],o=n[2];return r.a.createElement("div",null,r.a.createElement(Y.a,{className:"mb-3",body:!0},"Profile"),o&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",o.message),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement(Y.a,{border:"light",className:"text-center"},r.a.createElement(k.a,null,r.a.createElement(w.a,null),r.a.createElement(w.a,null,r.a.createElement(Z.a,{src:"https://via.placeholder.com/300",roundedCircle:!0})),r.a.createElement(w.a,null)),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,l.val().lastname," ",l.val().firstname),r.a.createElement(Y.a.Text,null,"Nom utilisateur: ",l.val().username),r.a.createElement(Y.a.Text,null,"Cr\xe9er le: ",l.val().dateCreatedAccount))))}function X(e){var a=e.uid,t=Object(q.a)(Object(s.firestore)().collection("users/".concat(a,"/favorites")),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,r.a.createElement(Y.a,{className:"mb-3",body:!0},"Favoris"),i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i.message),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement($.a,null,l.docs.map((function(e,a){return r.a.createElement(Y.a,{key:e.id,border:"dark"},r.a.createElement(Y.a.Header,null,a+1,r.a.createElement(N.a,{icon:I.e,pull:"right",size:"lg",onClick:function(a){return t=e.ref.path,n=a,Object(s.firestore)().doc(t).delete(),void n.preventDefault();var t,n},color:"red"})),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,e.data().titre),r.a.createElement(Y.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artiste),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e par ",r.a.createElement("cite",{title:e.data().createBy},e.data().createBy)),r.a.createElement(Y.a.Link,{as:o.Link,to:"/liste=".concat(e.data().id)},"Consulter")))}))))}function ee(e){var a=e.uid,t=Object(q.a)(Object(s.firestore)().collection("users/".concat(a,"/chansons")),{snapshotListenOptions:{includeMetadataChanges:!0}}),n=Object(m.a)(t,3),l=n[0],c=n[1],i=n[2];return r.a.createElement("div",null,r.a.createElement(Y.a,{className:"mb-3",body:!0},"Chansons"),i&&r.a.createElement(L.a,{variant:"danger"},"Erreur: ",i.message),!i&&r.a.createElement(L.a,{variant:"info"},"La liste des chansons que vous avez contribu\xe9es \xe0 ajouter!"),c&&r.a.createElement(G.a,{animation:"grow",variant:"primary"}),!c&&l&&r.a.createElement($.a,null,l.docs.map((function(e,a){return r.a.createElement(Y.a,{key:e.id,border:"success"},r.a.createElement(Y.a.Header,null,a+1),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,e.data().titre),r.a.createElement(Y.a.Subtitle,{className:"mb-2 text-muted"},"Artiste: ",e.data().artiste),r.a.createElement("footer",{className:"blockquote-footer"},"Ajout\xe9e le ",r.a.createElement("cite",{title:e.data().createAt.toDate().toString()},e.data().createAt.toDate().toString())),r.a.createElement(Y.a.Link,{as:o.Link,to:"/liste=".concat(e.data().id)},"Consulter")))}))))}var ae=function(){return r.a.createElement(o.BrowserRouter,null,r.a.createElement(p,null,r.a.createElement(T,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.g,null,r.a.createElement(i.d,{exact:!0,path:"/",component:z}),r.a.createElement(i.d,{exact:!0,path:"/liste",component:H}),r.a.createElement(i.d,{exact:!0,path:"/liste=:id",component:W}),r.a.createElement(i.d,{exact:!0,path:"/profile",component:_})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,a,t){e.exports=t(102)},86:function(e,a,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.77020f3b.chunk.js.map